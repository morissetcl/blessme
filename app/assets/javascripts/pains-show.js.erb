$(document).ready(function() {
  $(".pray-link-write").on("click", function(e){
    $(".form-for-audio-pray").addClass("hidden");
    $("#candle").addClass("hidden");
    $(".container-prayer").toggleClass("hidden");
    var n = $(document).height();
    $('html, body').animate({ scrollTop: 0 }, 'slow');
  });
});

$(document).ready(function() {
  $(".pray-link-record").on("click", function(e){
    $(".container-prayer").addClass("hidden");
    $("#candle").addClass("hidden");
    $(".form-for-audio-pray").toggleClass("hidden");
    var n = $(document).height();
    $('html, body').animate({ scrollTop: 0 }, 'slow');
  });
});

$(document).ready(function() {
  $(".delete-link").on('click', function(e){
    $(".container-prayer").toggleClass("hidden");
  });
});

// Envoi de la pensée

$(document).ready(function() {
  $(".pray-link-thought").on("click", function(e){
    $(".container-prayer").addClass("hidden");
    $(".form-for-audio-pray").addClass("hidden");
    $("#candle").toggleClass("hidden");
    $(".navbar-blessme").addClass("hidden");
    $(".prayers-container").addClass("hidden");
    $(".footer").addClass("hidden");

    var id = $(this).data("id");
    var n = $(document).height();
    $('html, body').animate({ scrollTop: n }, 'slow');

    $.ajax({
      type: 'POST',
      url: '/pains/' + id + '/upvote',
    });

    setTimeout(function() {
      window.location.pathname = url;
      $("#prayer-candle").fadeOut(300);
    }, 10000);
  });
});

//Report pain

$(document).ready(function() {
  $(".signaler").on("click", function(e){
    var id = $(this).data("id");
    swal({
        title: "Signalement",
        text: "Voulez-vous signaler cette demande ?",
        type: "question",
        showCancelButton: true,
        confirmButtonColor: '#B56969',
        cancelButtonColor: '#B4D8C0',
        confirmButtonText: 'Oui',
        cancelButtonText: 'Non',
      }).then(function() {
        $.ajax({
          type: 'POST',
          url: '/pains/' + id + '/report',
        })
        .done(function() {
          swal("Signalé!", "Cette demande a été signalé", "success");
        })
        .error(function() {
          swal("Oops", "Une erreur s'est produite", "error");
        });
      });
  });
});

// $(document).ready(function() {
//   $(".votee").on("click", function(e){
//     var prayer_id = $(this).data("id");
//     var pain_id = $(this).data("pain-id");
//     var n = $(document).height();
//
//     $.ajax({
//       type: 'POST',
//       url: '/pains/' + pain_id +'/prayers/' + prayer_id +'/upvote',
//     });
//   });
// });

// Report prayer

$(document).ready(function() {
  $(".fa-exclamation-triangle").on("click", function(e){
    var id = $(this).data("id");
    console.log(id)
    swal({
        title: "Signalement",
        text: "Voulez-vous signaler cette demande ?",
        type: "question",
        showCancelButton: true,
        confirmButtonColor: '#B56969',
        cancelButtonColor: '#B4D8C0',
        confirmButtonText: 'Oui',
        cancelButtonText: 'Non',
      }).then(function() {
        $.ajax({
          type: 'POST',
          url: '/prayers/' + id + '/report_prayer',
        })
        .done(function() {
          swal("Signalé!", "Cette demande a été signalé", "success");
        })
        .error(function() {
          swal("Oops", "Une erreur s'est produite", "error");
        });
      });
  });
});

// delete prayer

$(document).ready(function() {
  $(".fa-trash").on("click", function(e){
   var id = $(".fa-trash").data("id");
   var pain_id = $(".fa-trash").data("id-pain");
   swal ({
        title: 'Effacer',
        text: "Voulez-vous supprimer cette prière ?",
        type: 'question',
        showCancelButton: true,
        confirmButtonColor: '#B56969',
        cancelButtonColor: '#B4D8C0',
        confirmButtonText: 'Oui',
        cancelButtonText: 'Non'
      }).then(function() {
        $.ajax({
          type: 'DELETE',
          url: '/pains/' + pain_id + '/prayers/' + id,
          success: location.reload(),
        });
     });
  });
});
